\documentclass[12pt,a4paper]{book}
\usepackage[latin1]{inputenc}    % Ascii-Format dieses Dokuments
\usepackage{longtable}           % lange Tabellen

\begin{document}
\title{EOF\\Eris Onion Forwarding\\
The secure, peer-to-peer, decentralised anonymous chat network}
\date{2009-03-12}
\author{Nico -telmich- Schottelius}

\maketitle
\tableofcontents
\newpage

% -----------------------------------------------------------------------------
\chapter{Introduction}
% -----------------------------------------------------------------------------
\section{Abstract}
EOF is chat protocol that supports secure chatting.
Secure chatting consists of the following features:
\begin{enumerate}
\item Nobody, but the intended receiver(s) know \emph{that} you wrote a message.
\item Nobody, but the intended receiver(s) can view the \emph{message content}.
\item Nobody, but the intended receiver(s) can \emph{verify} the source of the message being you.
\item Nobody, but the intended receiver(s) know \emph{who} you sent a message to.
\end{enumerate}
We don't think it's possible to hide that you are part of the chat network.
Thus, every participant of an EOF network will constantly send packets
(so called \emph{noise}) in a defined frequency (for instance every 250 ms).
The noise is also used to defend against timing analysis.
In case you are sending out a message, the message packet will be added to the
queue and sent with the next free interval.

We encrypt and sign every message via public-key cryptography\cite{pgp-1},
so that only the receiver can decrypt, view the message content and verify
the message sender.

The message packets are always send indirectly via onion routing\cite{onion-1}.
The idea is taken from the Tor project\cite{tor-1}, though EOF uses an enhanced
version: EOF does not know about entry or exit nodes. If you are the intended
receiver you may or may not continue to forward the message, which is defined
by the sender of the message. That said, EOF must use source
routing\cite{source-routing-1}.

EOF knows about two different chat destinations:
\begin{enumerate}
\item Peers
\item Groups of peers
\end{enumerate}
A peer is just another person (direct chat), a group of peers is the EOF
equivalent of the IRC channel\cite{irc-1}. As there is no central server,
groups of peers are managed by each client and may thus by differnt by
different peers.

EOF does not implement nor specify \emph{transport protocols} itself.
The EOF community is urged to implement them in a creative way: Usage
of well-known protocols like TCP\cite{tcp-1}, HTTP\cite{http-1},
SMTP\cite{smtp-1} or even transmission of packets on avian
carriers\cite{avian-1} are encouraged. The tunneling of EOF packets into
those protocols (also know as obfuscation) makes it harder to detect
and block EOF traffic.
% -----------------------------------------------------------------------------
\section{Motivation}
Must have been written somewhere else already
% -----------------------------------------------------------------------------
\section{Copying, authors, ...}
% -----------------------------------------------------------------------------
\section{Further directions}
Analyse security
enhance performance
port to other systems
spread the word
% -----------------------------------------------------------------------------
\section{Conventions}
\$NAME = variable
% -----------------------------------------------------------------------------
\section{Introduction}
missing :-)
and further sections, too. Currently just documentating, what is important
for now.
% -----------------------------------------------------------------------------
\chapter{The EOF protocol}
% -----------------------------------------------------------------------------
\section{Version}
This will be version \textbf{1} of the protocol. It is the first definition.
Further changes will be documentated in this section.
% -----------------------------------------------------------------------------
\section{Introduction}
Stateless: source routing, usage of acks.
% -----------------------------------------------------------------------------
\section{Onion-Packets}
What's seen from outside
% -----------------------------------------------------------------------------
\section{Packets}
What's seen from inside (after stripping of the onion skin).
% -----------------------------------------------------------------------------
\section{Interfaces}
General: pipe'd
% -----------------------------------------------------------------------------
\subsection{Transport protocols}
Environment variables: CWD for listener
% -----------------------------------------------------------------------------
\section{The user interface (UI)}
Maybe own section.
List and describe commands.
Command = subsection
% -----------------------------------------------------------------------------
\section{Configuration}
cconfig

% -----------------------------------------------------------------------------
\chapter{Implementation}
Sample implementation for POSIX.

% -----------------------------------------------------------------------------
\chapter{Transport protocols}
% -----------------------------------------------------------------------------
\section{Introduction}
Only lower-case allowed (to prevent problems with broken filesystems).
% -----------------------------------------------------------------------------
\section{Examples}
This sections shows some theoretic (theoretic because nobody implemented
them yet) transport protocols.
% -----------------------------------------------------------------------------
\subsection{tcp}
% -----------------------------------------------------------------------------
\subsection{tcps}
% -----------------------------------------------------------------------------
\subsection{udp}
% -----------------------------------------------------------------------------
\subsection{http}
% -----------------------------------------------------------------------------
\subsection{https}
% -----------------------------------------------------------------------------
\subsection{smtp}
connect to smtp server
% -----------------------------------------------------------------------------
\subsection{smtps}
% -----------------------------------------------------------------------------
\subsection{mediawiki}
url, user, password
% -----------------------------------------------------------------------------
\subsection{smb}
write on windows shares
% -----------------------------------------------------------------------------
\subsection{email}
Write an email to some address. Needs smtp-server set in configuration.
% -----------------------------------------------------------------------------
\subsection{dns}
Use dns traffic to transport EOF protocols.

% -----------------------------------------------------------------------------
\section{Embedding into EOF}
This section explains how to integrate a transport protocol into EOF.
% -----------------------------------------------------------------------------
\subsection{Adding a transport protocol}
If you want to add the transport protocol \emph{tptest}:
\begin{itemize}
\item Create the directories
\begin{itemize}
\item \textbf{\$HOME/.ceof/transport-protocols/available/\emph{tptest}}.
\end{itemize}
\item Create (link or copy) the executables to the filenames \textbf{listen}
and \textbf{send}.
\end{itemize}
The EOF implementation will register the transport protocol automatically
at the next start. You may register only the \textbf{listen} or
\textbf{send} part of a protocol.
% -----------------------------------------------------------------------------
\subsection{Using a transport protocol}
So far the EOF implementation knows about the implementation, may also already
use for \emph{sending} packets. But there is no listener configured yet.
To enable a listener for the protocol \emph{tptest} at the URL
\emph{tptest:somewhere@protocol-specific}
\begin{itemize}
\item create a directory below
\begin{itemize}
\item \textbf{\$HOME/.ceof/transport-protocols/enabled/}
\end{itemize}
\item with a name of your choice (f.i. \emph{tptest-somwhere} or \emph{http-80}).
\item Then add the URL to the file named $<\textbf{url}>$.
\item If the transport protocol needs or allows additional configuration files,
you need to create them in that directory.
\end{itemize}
The EOF implementation will parse the URL and check whether a supporting
listener application is available.
% -----------------------------------------------------------------------------
\section{Implementations}
The following sections cover existent protocol implementations.
The name of the section is the name of the registered implementation.
Every section must at least contain:
\begin{itemize}
\item Author contact information
\item URL of website
\item EOF-Version that introduces support for the protocol
\end{itemize}

If there are multiple implementations available, create two subsections
covering both implementations.
% -----------------------------------------------------------------------------
\chapter{Unsorted}
\section{Channels}
Exist as long as somebody remembers it
Channelname is signed by creator?
% -----------------------------------------------------------------------------
\appendix
\chapter{Sources}
\begin{thebibliography}{42}
\bibitem{pgp-1} http://en.wikipedia.org/wiki/Public-key\_cryptography
\bibitem{onion-1} http://en.wikipedia.org/wiki/Onion\_routing
\bibitem{tor-1} https://wiki.torproject.org/noreply/TheOnionRouter
\bibitem{irc-1} RFC 1459: http://www.irchelp.org/irchelp/rfc/rfc.html
\bibitem{source-routing-1} http://en.wikipedia.org/wiki/Source\_routing
\bibitem{tcp-1} RFC 793: http://www.faqs.org/rfcs/rfc793.html
\bibitem{http-1} RFC 2616: http://www.faqs.org/rfcs/rfc2616.html
\bibitem{smtp-1} RFC 2821: http://www.faqs.org/rfcs/rfc2821.html
\bibitem{avian-1} RFC 1149: http://www.faqs.org/rfcs/rfc1149.html
\end{thebibliography}
\end{document}

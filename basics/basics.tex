\documentclass[12pt,a4paper]{article}
% FIXME: UTF8
\usepackage[latin1]{inputenc}    % Ascii-Format dieses Dokuments
\usepackage{longtable}           % lange Tabellen
%\usepackage[dvips]{epsfig}

\begin{document}
\title{EOF-1\\Basic definitions}
\date{2007-11-22 v0.2-train}
\author{telmich}

\maketitle
\tableofcontents
\newpage

\section{Introduction}
This document specifies the basic datatypes and connection
methods used in EOF-1. The aim is to stop repeatition of
datatype definition in other documents.

\subsection{Changelog}
% -----------------------------------------------------------------------------
\subsubsection{v0.1 to v0.2}
\begin{itemize}
\item Add versions specification
\end{itemize}
% -----------------------------------------------------------------------------
\subsubsection{v0.1}
\begin{itemize}
\item Initial release
\end{itemize}
% -----------------------------------------------------------------------------
\section{Versions}
This section clearifies the use of versions in the programs and protocols.
% -----------------------------------------------------------------------------
\subsection{Protocol}
The version of a protocol consists of 
\begin{itemize}
\item \textbf{major} number,
\item \textbf{minor} number and
\item the \textbf{patchlevel}
\end{itemize}
An increment of either number must be reflected with a protocol version change
within the protocol definition.
% -----------------------------------------------------------------------------
\subsection{Major number}
Within one major number the same aim should be followed. For instance
version "`0.x.y"' could target the first release.
% -----------------------------------------------------------------------------
\subsection{Minor number}
Within one minor number the same functionality should be kept.
For instance "`0.1.y"' contains basic functionality, "`0.2.y"' could
contain complete new functionality.
% -----------------------------------------------------------------------------
\subsection{Patchlevel}
The patchlevels are used to correct mistakes, but do not change the API.
% -----------------------------------------------------------------------------
\subsection{Valid from...}
All protocol definitions (includings drafts) that are released after
\textbf{20071122} should follow this version numbering scheme.
% -----------------------------------------------------------------------------
\subsection{Programs}
% -----------------------------------------------------------------------------
\section{Connections}
\subsection{Sockets}
Sockets are named Unix sockets.
\subsection{Stdin  and stdout}
To make programming easier, communication between some parts in EOF-1 is realised
using stdin and stdout. 
% -----------------------------------------------------------------------------
\section{Environment}
Environment variable are set from the operating system or from the user.
The following environment variables are used with EOF-1:
% -----------------------------------------------------------------------------
\subsection{HOME}
Home directory of the user.
% -----------------------------------------------------------------------------
\subsection{CEOF\_DIR}
Ceof configuration directory.
% -----------------------------------------------------------------------------
\subsection{CEOF\_CLIENT\_SOCKET}
The socket that the clients (GUIs) should use.
Relative to the directory specified by CEOF\_DIR.
% -----------------------------------------------------------------------------
\section{Paths}
% -----------------------------------------------------------------------------
\subsection{Ceof configuration directory}
% -----------------------------------------------------------------------------
\subsubsection{Default case}
Normally, \$HOME is set and \$CEOF\_DIR is not set. In that case
the configuration directory defaults to \textit{\$HOME/.ceof}.
% -----------------------------------------------------------------------------
\subsubsection{HOME is unset}
If the environment variable "`\textit{HOME}`" is not set,
the directory named \textit{.ceof} in the current directory will be used.
% -----------------------------------------------------------------------------
\subsubsection{CEOF\_DIR is set}
If the environment variable "`\textit{CEOF\_DIR}`" is set,
its content will be used to refer to the configuration directory.
% -----------------------------------------------------------------------------
\subsection{Ceof client socket}
The client connects to a socket named \textit{clients/socket}, relative
to the configuration directory.
% -----------------------------------------------------------------------------
\subsubsection{CEOF\_CLIENT\_SOCKET is set}
If the environment variable \textit{CEOF\_CLIENT\_SOCKET} is set,
"`\textit{clients/socket}"` should be replaced by its content.
% -----------------------------------------------------------------------------
\section{Datatypes and dataspecification}
% -----------------------------------------------------------------------------
\subsection{Basic data types}
% -----------------------------------------------------------------------------
\subsubsection{ASCII numbers}
ASCII numbers use the string representation of a number and
4 Byte, used when other programming langua
Excluding 0
% -----------------------------------------------------------------------------
\subsubsection{Binary numbers}
Between some parts of EOF-1 are binary numbers (as in \textit{uint32\t})
exchanged.
% -----------------------------------------------------------------------------
\subsubsection{The zero Byte}
The zero Byte is a Byte with the value 0.
% -----------------------------------------------------------------------------
\subsubsection{Strings}
Strings are transmitted without termination (i.e. no new line, no 0 byte).
% -----------------------------------------------------------------------------
\subsubsection{Variable length strings}
Before variable length strings the length is submitted in a fixed size
datatype.
% -----------------------------------------------------------------------------
\subsubsection{Fixed length strings}
Fixed length strings contain exactly the specified number of Bytes:
In a 128 Byte fixed length string fits at most 128 Bytes of text,
which is then not zero terminated!
If the text it contains is shorter than the specified length,
it must be padded with zero Bytes (see above).
% -----------------------------------------------------------------------------
\subsection{EOF data types specification}
The following sections define the datatypes used in EOF related
applications. The recommened name for use in source
code is added in parentheses after the human understandable name.
% -----------------------------------------------------------------------------
\subsubsection{Peer name (peername)}
The peer name is a 128 Byte fixed length string. It is only
used internally to give a peer a rememberisable name ("`a nick'").
It is never transmitted over the network.
% -----------------------------------------------------------------------------
\subsubsection{Channel name (channel)}
The channel name is a 128 Byte fixed length string.
% -----------------------------------------------------------------------------
\subsubsection{Message text (msgtext)}
The message text is a 128 Byte fixed length string.
% -----------------------------------------------------------------------------
\end{document}
